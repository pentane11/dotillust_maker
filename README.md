# dotillust_maker

シンプルなドット絵メーカー - 画像を手軽にレトロなドット絵風に変換できるWebアプリケーション

## 主要機能

### 📥 画像の読み込み
- **ファイル読み込み**: 「画像を読み込む」ボタンでローカル画像を選択
- **カメラ撮影**: 「カメラで撮影」ボタンでリアルタイム撮影（Spaceキーで撮影可）

### 🎨 ドット絵変換設定

**基本設定:**
- **ドットの粗さ** (1-50): 数値が大きいほど粗いドット絵に
- **色数** (2-64): Custom パレット選択時の色数（k-meansクラスタリングで減色）

**画像調整:**
- **コントラスト** (0.5-2.0): 明暗の差を調整
- **彩度** (0.0-2.0): 色の鮮やかさを調整

**パレット選択:**
- **Custom**: 指定色数で自動減色
- **GameBoy**: ゲームボーイ風4色緑パレット
- **Monochrome**: 白黒2色
- **Sepia**: セピア調4色

**エフェクト:**
- **輪郭線強調**: エッジ検出で輪郭を黒く強調
- **グリッド線**: ドット境界にグリッド表示

### ✂️ 編集機能

**トリミング:**
- キャンバス上でドラッグして選択範囲を作成
- 8方向のハンドルでサイズ調整可能
- 選択範囲内をドラッグして移動
- 「選択範囲でトリミング」ボタンで確定

**元に戻す/やり直し:**
- ↶ボタン: 最大10ステップまで元に戻せる
- ↷ボタン: やり直し

### 🔍 表示機能

**ズーム:**
- ＋/－ボタンでズームイン/アウト
- **Ctrl + マウスホイール**: トラックパッドのピンチ操作
- **2本指ピンチ** (タッチデバイス): タッチ操作でのズーム
- 倍率表示: 現在のズーム率を%で表示

### 💾 保存機能

**フォーマット選択:**
- PNG (デフォルト、透過対応)
- JPEG
- WebP

**保存方法:**
- Chrome/Edge/Opera: File System Access APIで保存先を選択可能
- Firefox/Safari: 自動ダウンロード

## 技術的特徴

### 画像処理アルゴリズム

1. **減色処理**:
   - k-meansクラスタリング（Custom）で最適な色パレットを自動生成
   - 透明ピクセルは処理から除外し、アルファ値を2値化（0 or 255）

2. **ドット化**:
   - 画像を指定サイズに縮小してモザイク効果
   - Nearest Neighbor補間で拡大してドット感を維持

3. **エッジ検出**:
   - グレースケール化→隣接ピクセルとの差分計算
   - 閾値を超えた部分を黒線化

4. **リアルタイムプレビュー**:
   - スライダー操作中は即座に反映（inputイベント）
   - 操作完了時に履歴保存（changeイベント）

### UI/UX

- **レスポンシブレイアウト**: flexboxで画面サイズに対応
- **タッチ対応**: スマホ・タブレットでのピンチ操作
- **履歴管理**: 10ステップまでの変更履歴を保持
- **クロスブラウザ対応**: モダンブラウザでの動作を保証

## 使い方

1. HTMLファイルをブラウザで開く
2. 「画像を読み込む」または「カメラで撮影」で画像を取得
3. 各種パラメータを調整してドット絵を作成
4. 「画像を保存」ボタンで保存

## ブラウザ対応

- Chrome / Edge / Opera (推奨)
- Firefox
- Safari

※ モダンブラウザの最新版を推奨します

## ライセンス

MIT License

---

🎮✨ このツールを使えば、写真を手軽にレトロなドット絵風に変換できます！
